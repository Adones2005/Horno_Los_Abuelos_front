<!-- src/app/pages/public/registrar/registrar.component.html -->
<div class="min-h-screen flex items-center justify-center">
  <div class="mx-4 w-full max-w-lg rounded-2xl bg-white/90 backdrop-blur-sm shadow-lg">
    <!-- Cabecera -->
    <header class="rounded-t-2xl bg-[#B9A99B] px-8 py-6 text-center text-white">
      <h1 class="text-2xl font-semibold tracking-wide">Registro de empleado</h1>
    </header>

    <!-- Formulario -->
    <form
      [formGroup]="form"
      (ngSubmit)="onSubmit()"
      class="space-y-6 px-8 py-8"
      novalidate
    >
      <!-- Nombre -->
      <div>
        <label class="mb-2 inline-block text-sm font-medium text-gray-700">Nombre</label>
        <input
          type="text"
          formControlName="nombre"
          class="w-full rounded-lg border border-gray-300 bg-white py-2 px-3 text-sm focus:border-[#E5D2BC] focus:outline-none focus:ring-2 focus:ring-[#E5D2BC]"
        />
        <p *ngIf="form.get('nombre')?.invalid && form.get('nombre')?.touched"
           class="mt-1 text-xs text-red-500">Campo obligatorio.</p>
      </div>

      <!-- Usuario -->
      <div>
        <label class="mb-2 inline-block text-sm font-medium text-gray-700">Usuario</label>
        <input
          type="text"
          formControlName="username"
          class="w-full rounded-lg border border-gray-300 bg-white py-2 px-3 text-sm focus:border-[#E5D2BC] focus:outline-none focus:ring-2 focus:ring-[#E5D2BC]"
        />
        <p *ngIf="form.get('username')?.invalid && form.get('username')?.touched"
           class="mt-1 text-xs text-red-500">Campo obligatorio.</p>
      </div>

      <!-- Email -->
      <div>
        <label class="mb-2 inline-block text-sm font-medium text-gray-700">Email</label>
        <input
          type="email"
          formControlName="email"
          class="w-full rounded-lg border border-gray-300 bg-white py-2 px-3 text-sm focus:border-[#E5D2BC] focus:outline-none focus:ring-2 focus:ring-[#E5D2BC]"
        />
        <p *ngIf="form.get('email')?.invalid && form.get('email')?.touched"
           class="mt-1 text-xs text-red-500">Introduce un email válido.</p>
      </div>

      <!-- Contraseña -->
      <div>
        <label class="mb-2 inline-block text-sm font-medium text-gray-700">Contraseña</label>
        <input
          type="password"
          formControlName="password"
          class="w-full rounded-lg border border-gray-300 bg-white py-2 px-3 text-sm focus:border-[#E5D2BC] focus:outline-none focus:ring-2 focus:ring-[#E5D2BC]"
        />
        <p *ngIf="form.get('password')?.invalid && form.get('password')?.touched"
           class="mt-1 text-xs text-red-500">Mínimo 8 caracteres.</p>
      </div>

        <div>
        <label class="mb-2 inline-block text-sm font-medium text-gray-700">Rol</label>

        <div class="grid gap-2 sm:grid-cols-3">
            <!-- Comercial -->
            <label class="cursor-pointer">
            <input
                type="radio"
                formControlName="rolId"
                [value]="1"
                class="peer sr-only"
            />
            <div
                class="flex flex-col items-center rounded-lg border border-gray-300
                    bg-white p-3 text-sm transition
                    peer-checked:border-[#E5D2BC] peer-checked:bg-[#F7F3EF]"
            >
                <i class="fa-solid fa-handshake-angle text-xl mb-1"></i>
                Comercial
            </div>
            </label>

            <!-- Gestor -->
            <label class="cursor-pointer">
            <input
                type="radio"
                formControlName="rolId"
                [value]="2"
                class="peer sr-only"
            />
            <div
                class="flex flex-col items-center rounded-lg border border-gray-300
                    bg-white p-3 text-sm transition
                    peer-checked:border-[#E5D2BC] peer-checked:bg-[#F7F3EF]"
            >
                <i class="fa-solid fa-user-tie text-xl mb-1"></i>
                Gestor
            </div>
            </label>

            <!-- Repartidor -->
            <label class="cursor-pointer">
            <input
                type="radio"
                formControlName="rolId"
                [value]="3"
                class="peer sr-only"
            />
            <div
                class="flex flex-col items-center rounded-lg border border-gray-300
                    bg-white p-3 text-sm transition
                    peer-checked:border-[#E5D2BC] peer-checked:bg-[#F7F3EF]"
            >
                <i class="fa-solid fa-truck-fast text-xl mb-1"></i>
                Repartidor
            </div>
            </label>
        </div>

        <p *ngIf="form.get('rolId')?.invalid && form.get('rolId')?.touched"
            class="mt-1 text-xs text-red-500">
            Selecciona un rol.
        </p>
        </div>



      <!-- Error global -->
      <p *ngIf="errorMsg" class="text-sm text-red-600">{{ errorMsg }}</p>
      <p *ngIf="success" class="text-sm text-green-600">Registro correcto — redirigiendo…</p>

      <!-- Botón enviar -->
      <button
        type="submit"
        [disabled]="loading"
        class="inline-flex w-full items-center justify-center gap-2 rounded-full bg-[#E5D2BC] py-2 font-medium text-gray-800 transition hover:bg-[#d9c0a9] disabled:cursor-not-allowed disabled:opacity-50"
      >
        <i class="fa-solid fa-user-plus" *ngIf="!loading"></i>
        <svg *ngIf="loading" class="h-5 w-5 animate-spin" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" />
        </svg>
        <span>{{ loading ? 'Enviando…' : 'Crear cuenta' }}</span>
      </button>

      <!-- enlace volver -->
      <p class="mt-4 text-center text-sm">
        ¿Ya tienes cuenta?
        <a routerLink="/identificarse" class="font-medium text-[#5d554e] hover:underline">Inicia sesión</a>
      </p>
    </form>
  </div>
</div>
